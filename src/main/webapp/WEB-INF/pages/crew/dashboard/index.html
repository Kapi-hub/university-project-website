<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Dashboard</title>

    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/kiona-2" rel="stylesheet">
    <link href="/static/crew/style.css" rel="stylesheet" type="text/css">

    <style>
        .accordion-item + .accordion-item {
            margin-top: 20px;
        }
    </style>

    <script>
        function logout() {

            document.cookie = "sessionId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"
            document.cookie = "accountId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"

            window.location.href = "/login?logout=true"

        }
    </script>
</head>
<body>
<nav class="navbar navbar-custom navbar-animated">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img alt="Logo" class="d-inline-block align-text-middle" src="/static/img/Shotmaniacs_Logo_White_ZT.png"
                 width="30">
            <span class="ps-3 LogoText color">Shotmaniacs</span>
        </a>
        <ul class="nav justify-content-end ">
            <!--only for this page, because index.html is the dashboard page-->
            <li class="nav-item me-2 border border-2 bg-white border-white rounded-pill ">
                <a aria-current="page" class="nav-link text-dark" href="#">Dashboard</a>
            </li>
            <li class="nav-item ">
                <a class="nav-link text-white" href="/crew/calendar">Calendar</a>
            </li>
            <li class="nav-item ">
                <a class="nav-link text-white" onclick="logout()" style="cursor: pointer">Logout</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container welcome-container">
    <!--    <button onclick="resizeContainer()">Resize</button>-->
    <h1 class="welcomeMessageName">Welcome, Alex</h1>
    <h4 class="welcomeMessageEvents">No new events.</h4>
</div>

<div class="main-container">
    <div class="sidebar-dashboard">
        <ul class="sidebar-list">
            <div class="slider"></div>
            <li class="sidebar-list-item">
                <a href="#">
                        <span class="icon">
                            <ion-icon name="megaphone-outline"></ion-icon>
                        </span>
                </a>
            </li>
            <li class="sidebar-list-item">
                <a href="#">
                    <span class="icon"><ion-icon name="play-outline"></ion-icon></span>
                </a>
            </li>
            <li class="sidebar-list-item">
                <a href="#">
                    <span class="icon"><ion-icon name="checkmark-done-outline"></ion-icon></span>
                </a>
            </li>
            <li class="sidebar-list-item">
                <a href="#">
                    <span class="icon"><ion-icon name="stats-chart-outline"></ion-icon></span>
                </a>
            </li>
        </ul>
    </div>
    <div class="main-box"></div>
</div>


<div class="container-fluid mt-5 mb-5 w-75 pt-3 pb-3 border border-white">
    <h3 class="text-white sticky-top">
        <span id="numberOfAnno">0</span> Announcements</h3>
    <div id="liveAlertPlaceholder"></div>
    <button class="btn btn-primary" id="liveAlertBtn" onclick="countAnnouncementsAsc()" type="button">Show live alert
    </button>
</div>

<div class="container-fluid mt-5 mb-5 w-75 pt-3 pb-3 border border-white text-white">
    <!--    TODO: set with an actual counter-->
    <h3> On-going events (2)</h3>
    <div class="accordion " id="currentEvents">
        <div class="accordion-item rounded-4">
            <h2 class="accordion-header ">
                <button aria-controls="collapseOneCurrent" aria-expanded="false"
                        class="accordion-button collapsed rounded-4"
                        data-bs-target="#collapseOneCurrent" data-bs-toggle="collapse" type="button">
                    On-going event #1
                </button>
            </h2>
            <div class="accordion-collapse collapse" data-bs-parent="#currentEvents" id="collapseOneCurrent">
                <div class="accordion-body">
                    <strong>First body.</strong>
                    Here will go the details of the event.
                </div>
            </div>
        </div>
        <div class="accordion-item rounded-4">
            <h2 class="accordion-header">
                <button aria-controls="collapseTwo" aria-expanded="false" class="accordion-button collapsed rounded-4"
                        data-bs-target="#collapseTwo" data-bs-toggle="collapse" type="button">
                    On-going event #2
                </button>
            </h2>
            <div class="accordion-collapse collapse" data-bs-parent="#currentEvents" id="collapseTwo">
                <div class="accordion-body">
                    <strong>Second body.</strong> Testing to see how it goes.
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid mt-5 mb-5 w-75 pt-3 pb-3 border border-white text-white">
    <!--    TODO: set with an actual counter-->
    <h3> Past events (2)</h3>
    <div class="accordion " id="pastEvents">
        <div class="accordion-item rounded-4 ">
            <h2 class="accordion-header ">
                <button aria-controls="collapseOnePast" aria-expanded="false"
                        class="accordion-button collapsed rounded-4"
                        data-bs-target="#collapseOnePast" data-bs-toggle="collapse" type="button">
                    Past event #1
                </button>
            </h2>
            <div class="accordion-collapse collapse" data-bs-parent="#pastEvents" id="collapseOnePast">
                <div class="accordion-body">
                    <strong>First body.</strong>
                    It is hidden by default, until the collapse plugin adds the appropriate classes
                    that we use to style each element. These classes control the overall appearance,
                    as well as the showing and hiding via CSS transitions. You can modify any of
                    this with custom CSS or overriding our default variables. It's also worth noting
                    that just about any HTML can go within the <code>.accordion-body</code>, though
                    the transition does limit overflow.
                </div>
            </div>
        </div>
        <div class="accordion-item rounded-4 ">
            <h2 class="accordion-header">
                <button aria-controls="collapseTwoPast" aria-expanded="false"
                        class="accordion-button collapsed rounded-4"
                        data-bs-target="#collapseTwoPast" data-bs-toggle="collapse" type="button">
                    Past event #2
                </button>
            </h2>
            <div class="accordion-collapse collapse" data-bs-parent="#pastEvents" id="collapseTwoPast">
                <div class="accordion-body">
                    <strong>Second body.</strong> Testing to see how it goes.
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
    const appendAlert = (message, type) => {
        const wrapper = document.createElement('div')
        wrapper.innerHTML = [
            `<div class="alert alert-${type} alert-dismissible" role="alert">`,
            `   <div>${message}</div>`,
            '   <button type="button" onclick="countAnnouncementsDesc()" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
            '</div>'
        ].join('')

        alertPlaceholder.append(wrapper)
    }

    const alertTrigger = document.getElementById('liveAlertBtn')
    if (alertTrigger) {
        alertTrigger.addEventListener('click', () => {
            appendAlert('Nice, you triggered this alert message!', 'success')
        })
    }
</script>

<script>
    let annoCounter = 0;
    let numberOfAnnoHandler = document.getElementById('numberOfAnno');

    function countAnnouncementsAsc() {
        annoCounter++;
        numberOfAnnoHandler.innerHTML = annoCounter;
    }

    function countAnnouncementsDesc() {
        annoCounter--;
        numberOfAnnoHandler.innerHTML = annoCounter;
    }
</script>

<script>
    // This is used in the animation that greets the crew member
    window.addEventListener('scroll', () => {
        document.body.style.setProperty('--scroll', window.pageYOffset / (document.body.offsetHeight - window.innerHeight));
    }, false);
</script>

<script crossorigin="anonymous"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/crew/dashboard/general.js"></script>
<script src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js" type="module"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="/static/crew/dashboard/sideBar.js"></script>
</body>
</html>